<%
entryData = local_data[:entry_data]

# safeTitle = entryData[:title].encode(Encoding.find('ASCII'), { replace: "" })
safeTitle = CGI.escape(entryData[:title])
url = "https://hansardsociety.org.uk/"
%>

<header class="banner JS-banner--semi">

  <%= partial "views/partials/banner/image",
    locals: { local_data: {
      entry_data: entryData }} %>

  <div class="banner__inner banner__inner--cp">
    <div class="banner__content banner__content--cp">
      <div class="grid grid--md">
        <div class="grid__cell grid__cell--md-above-md-7">
          <span class="label-xs label-tag e-acc-<%= catColor(entryData[:category]) %>-2 e-col-greyscale-0">
            <span class="e-va-fix"><%= entryData[:meta_label] %></span>
          </span>
          <h1
            class="banner__title title-lg e-mgn-t-xxs JS-truncate"
            data-truncate="{ 'xs': 120 }"><%= entryData[:title] %></h1>
        </div>
        <div class="grid__cell grid__cell--md-above-md-5 grid__cell--end">
          <div class="grid grid--xxs grid--middle">
            <div class="grid__cell grid__cell--xxs-12 label-xs">Share this</div>
            <%= partial "views/partials/social",
              locals: { local_data: {
                icons: [
                  "https://twitter.com/intent/tweet?text=#{ safeTitle }&url=#{ url }#{ entryData[:slug] }&via=HansardSociety&related=HansardSociety",
                  "https://facebook.com/sharer.php?u=#{ url }#{ entryData[:slug] }",
                  "https://www.linkedin.com/shareArticle?mini=true&url=#{ url }#{ entryData[:slug] }&title=#{ safeTitle }&source=hansardsociety.org.uk"
                ]}} %>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

