<%
panelData = local_data[:entry_data]
index = local_data[:index]

title = panelData[:title]
caption = panelData[:caption]
chartData = panelData[:chart_data]
chartOptions = panelData[:chart_options]
%>

<section
  id="panel-<%= index %>"
  class="panel e-bgc-white-1">

  <div class="panel__content panel__content--wide">
    <div class="chart">

      <header class="chart__header">
        <h2 class="title-sm e-col-brand-green-2 e-mgn-b-xxs"><%= title %></h2>
        <p class="e-fz-xs e-col-grey-3"><%= caption %></p>
      </header>

      <div class="chart__container">
        <canvas class="chart__canvas"></canvas>
      </div>
      <div class="chart__legend"></div>
      <script class="chart__template">
        {
          "type": "horizontalBar",
          "data": {
            "datasets": [
              {
                "label": "Affirmative procedure",
                "data": [40],
                "backgroundColor": "<%= siteData(:site_config)[:color_groups][:"brand-green"][:"2"] %>"
              },
              {
                "label": "Negative procedure",
                "data": [8],
                "backgroundColor": "<%= siteData(:site_config)[:color_groups][:"grey"][:"2"] %>"
              }
            ]
          },
          "options": {
            "responsive": true,
            "maintainAspectRatio": false,
            "scales": {
              "xAxes": [
                {
                  "type": "linear",
                  "scaleLabel": {
                    "display": true,
                    "labelString": "Number of SIs"
                  },
                  "stacked": true,
                  "ticks": {
                    "min": 0,
                    "max": 800,
                    "stepSize": 400
                  }
                }
              ],
              "yAxes": [
                {
                  "type": "category",
                  "stacked": true
                }
              ]
            }
          }
        }
      </script>
    </div>
  </div>
</section>
