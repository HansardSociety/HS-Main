<%
panelData = local_data[:entry_data]
index = local_data[:index]

bgc = panelData[:background_color]
bgcClass = colorProfile(:mono).include?(bgc) ? contentBgc(bgc) : contentBgc(bgc, { gradient: true })
titleColor = colorProfile(:dark).include?(bgc) ? "e-col-white-1" : "e-col-brand-green-1"
headingLevel = panelData[:heading_level]

panelSlug = panelData[:panel_slug]
%>

<div
  id="<%= panelSlug ? panelSlug : "panel-#{ index }" %>"
  class="panel <%= bgcClass %>"
>
  <div class="panel__inner">
    <div class="panel__content panel__content--medium e-align-cen">
      <% if headingLevel == "level-3" %>
        <h3 class="title-lg e-mgn-b-md <%= titleColor %>"><%= panelData[:title] %></h3>
      <% else %>
        <h2 class="title-lg e-mgn-b-md <%= titleColor %>"><%= panelData[:title] %></h2>
      <% end %>
      <% if panelData.copy %>
        <%= markdown(panelData[:copy], 'byline') %>
      <% end %>
    </div>
    <div class="panel__content panel__content--medium e-mgn-t-md">
      <div class="grid grid--xs">
        <% panelData[:accordians].each do |accordian| %>
          <div class="grid__cell grid__cell--xs-12 grid__cell--xs-above-sm-6">
            <%= partial 'views/partials/accordian',
              locals: { local_data: {
                accordian_data: accordian }} %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
