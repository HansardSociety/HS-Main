.modal {
  z-index: 300;
  top: 0;
  left: -9999px;

  @extend %e-height-full-vh;
  @extend %e-position-fixed;
  @extend %e-rad-slight;
  @extend %e-width-full-vw;

  &::before {
    opacity: 0;

    @extend %e-bgc-black;
    @extend %e-pseudo-elem;
    @extend %e-width-full;
    @extend %e-height-full;
  }
}

.modal__inner {
  width: 40rem;
  max-width: calc(100% - .5rem);
  height: calc(99.9999vh - .5rem);
  min-height: calc(99.9999vh - .5rem);
  max-height: calc(99.9999vh - .5rem);

  @extend %e-absolute-center-xy;
  @extend %e-bgc-white;
  @extend %e-rad-slight;
  @extend %e-flex-row;
  @extend %e-height-full-vh;
  @extend %e-overflow-y-hidden;
  @extend %e-box-shad-raised;
  @include above('sm') {
    height: 100%;
    height: auto;
    min-height: 5rem;
    max-height: 90vh;
  }
}

.modal__inner--narrow {
  width: 30rem;
}

.modal__header {
  top: 0;
  left: 0;

  height: 1.75rem;

  @extend %e-bgc-light-grey;
  @extend %e-position-absolute;
  @extend %e-width-full;
}

.modal__close {
  margin-left: calc(100% - 1.5rem);
}

.modal__content {
  max-height: 100vh; // must use units for Edge scroll
  margin-top: 1.75rem;

  @extend %e-align-left;
  @extend %e-overflow-y-auto;
  @extend %e-pad-sm;
  @extend %e-width-full;
}

////////////////////////////////////////////////////////////
//  Behaviour
////////////////////////////////////////////////////////////


.modal.JS-active {
  left: 0;

  @extend %e-animate-slide-up-in;

  &::before {
    animation-delay: 400ms;

    @extend %e-animate-fade-in-opaque;
  }
}

// Must declare after
.modal.JS-active,
.modal.JS-active::before {
  animation-fill-mode: forwards;
}
