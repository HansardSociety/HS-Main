nav#navbar.navbar.JS-inactive

  .navbar__inner

    / Hidden site title
    h1.hidden= config[:SITE_TITLE]

    .navbar__left

      / Menu
      = partial 'partials/menu',
        locals: { local_data: \
          { screen: 'mobile',
            nav_items: data.hs.navigation }}

      / Menu button
      = partial 'partials/button',
        locals: { data: \
          { type: 'state', size: 'small',
            page: 'no-scroll',
            icon: 'menu', icon_size: 'medium', icon_color: 'white',
            aria_id: 'activate-menu-mobile', aria_target_id: 'menu-mobile' }}

    .navbar__center
      =partial 'partials/logo'

    .navbar__right

      ul.navbar__list

        - data.hs.navigation.each do |id, navigation|
          li.navbar__item{
            class="#{
              'dropdown JS-state-local JS-inactive' if navigation.pages.length > 1
            }"
          }
            h2.title.title--small.title--white{
              class="#{
                'dropdown__title dropdown__title--inline' if navigation.pages.length > 1
              }"
            }

              / If navigation item contains one or no pages
              - if navigation.pages.length <= 1
                - navigation.pages.each do |page|
                  a{
                    href="#{ config[:SITE_URL] + '/' + page.slug }"
                    title="#{ navigation.title + ' - ' + config[:SITE_TITLE] }"
                  }= navigation.title

              / If navigation item contains more than one page
              - if navigation.pages.length > 1
                = navigation.title

                .dropdown__control
                  = partial 'partials/button',
                    locals: { data: \
                      { type: 'state', size: 'small',
                        page: 'no-scroll', exclusive: true, secondary_target: 'navbar',
                        icon: 'chevron-down', icon_size: 'medium', icon_color: 'white',
                        animation: 'rotate',
                        aria_id: "activate-menu-desktop-#{ navigation.title.parameterize }",
                        aria_target_id: "menu-desktop-#{ navigation.title.parameterize }" }}


            = partial 'partials/menu',
              locals: { local_data: \
                        { screen: 'desktop',
                          nav_items: navigation }}

      / Search
      = partial 'partials/button-state',
        locals: \
        { type: nil,
          size: 'small',
          icon: \
          { image: 'search',
            size: 'medium',
            color: 'white' },
          text: nil,
          animation: nil,
          state: \
          { scope: 'global',
            action: 'show-search',
            aria_id: 'navbar-search-button',
            aria_target_id: 'search',
            page: 'js-page-overlay',
            excl: true }}
