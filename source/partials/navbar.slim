nav.navbar{ role="navigation" }

  .navbar__inner

    / Hidden site title
    h1.hidden= config[:SITE_TITLE]

    .navbar__left.js-state-local

      / menu
      = partial 'partials/menu',
        :locals => { :screen => 'mobile',
                     :contentful => 'false' }


      / Menu button
      = partial 'partials/button-state',
        locals: \
        { type: nil,
          size: 'small',
          icon: \
          { image: 'menu',
            size: 'medium',
            color: 'white' },
          text: nil,
          animation: nil,
          state: \
          { scope: 'local',
            action: 'js-on',
            aria_id: 'navbar-menu-button',
            aria_target_id: 'menu-mobile',
            page: 'js-page-menu-mobile-on',
            excl: true }}

    .navbar__center

      / Logo
      =partial 'partials/logo'

    .navbar__right

      ul.navbar__list

        - data.hs.navigation.each do |id, navigation|
          li.navbar__item{
            class="#{
              'dropdown js-state-local js-exclusive js-off' if navigation.pages.length > 1
            }"
          }
            h2.title.title--small.title--white{
              class="#{
                'dropdown__title dropdown__title--inline' if navigation.pages.length > 1
              }"
            }

              / If navigation item contains one or no pages
              - if navigation.pages.length <= 1
                - navigation.pages.each do |page|
                  a{
                    href="#{ config[:SITE_URL] + '/' + page.slug }"
                    title="#{ navigation.title + ' - ' + config[:SITE_TITLE] }"
                  }= navigation.title

              / If navigation item contains more than one page
              - if navigation.pages.length > 1
                = navigation.title

                .dropdown__control

                  / Menu (desktop) trigger
                  = partial 'partials/button-state',
                    locals: \
                      { type: nil,
                        size: 'small',
                        icon: \
                        { image: 'chevron-down',
                          size: 'medium',
                          color: 'white' },
                        text: nil,
                        animation: 'rotate',
                        state: \
                        { scope: 'local',
                          action: 'js-on',
                          aria_id: "menu-desktop-#{ navigation.title }-button",
                          aria_target_id: "menu-desktop-#{ navigation.title }",
                          page: 'js-page-menu-desktop-on',
                          excl: true }}

            = partial 'partials/menu',
              locals: \
              { screen:     'desktop',
                contentful: navigation }

      / Search
      = partial 'partials/button-state',
        locals: \
        { type: nil,
          size: 'small',
          icon: \
          { image: 'search',
            size: 'medium',
            color: 'white' },
          text: nil,
          animation: nil,
          state: \
          { scope: 'global',
            action: 'show-search',
            aria_id: 'navbar-search-button',
            aria_target_id: 'search',
            page: 'js-page-overlay',
            excl: true }}
