section.panel
  .panel__content

    .panel__main.copy{
      class="#{ 'panel__main--order-2' if panel.image }"
    }

      / Title
      h2.title.title--medium= panel.title

      / Copy
      = Kramdown::Document.new(panel.copy.chomp('.') + 'â€¦').to_html

      / Calls to action
      - panel.calls_to_action.each do |cta|
        - if cta.action == 'modal'
          .js-state-local.modal-is.js-off

            = partial 'partials/modal',
              locals: \
              { title: cta.title,
                content: cta.modal }

            / Actions (ie. modal trigger)
            .panel__actions

              / Modal button
              = partial 'partials/button-state',
                locals: \
                { type: 'secondary',
                  size: 'small',
                  icon: nil,
                  text: \
                  { on: cta.button_text,
                    off: 'Close' },
                  animation: nil,
                  state: \
                  { scope: 'local',
                    action: 'js-on',
                    page: 'js-page-overlay',
                    aria_id: "",
                    aria_target_id: "",
                    excl: true }}

    .panel__aside{
      class="#{ 'panel__aside--order-1' if panel.image }"
    }
      = partial 'partials/text-image',
        locals: \
        { url: panel.image.url,
          alt: panel.image.alt }
